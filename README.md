## FIRST TIME:

#### yarn install
#### yarn prisma:g
#### yarn db:p


---


## RUN SERVER:

#### yarn start:dev


---

# Техническое задание | ERP.AERO | Node.js dev

## Задача:

Сделать сервис с REST API:

- **Авторизация** по jwt-токену (/info, /logout, /file (все роуты)).
- Настроить **CORS** для доступа с любого домена.
- База данных — **MySQL**.
- Токен создавать при каждой авторизации, действителен **10 минут**. Продлевать по истечению с помощью **refresh токена**.
- Реализовать на основе фреймворка **Express.js**.
- **API**:

  - **/signin [POST]** — запрос jwt-токена по id и паролю.
  - **/signin/new_token [POST]** — обновление jwt-токена по refresh токену.
  - **/signup [POST]** — регистрация нового пользователя; поля id и password (id — это номер телефона или email).
  - **/file/upload [POST]** — добавление нового файла в систему и запись параметров файла в базу: название, расширение, MIME type, размер, дата загрузки.
  - **/file/list [GET]** — выводит список файлов и их параметров из базы с использованием пагинации:
    - `list_size` — количество записей на странице (по умолчанию 10).
    - `page` — номер страницы (по умолчанию 1).
  - **/file/delete/:id [DELETE]** — удаляет документ из базы и локального хранилища.
  - **/file/:id [GET]** — выводит информацию о выбранном файле.
  - **/file/download/:id [GET]** — скачивание конкретного файла.
  - **/file/update/:id [PUT]** — обновление текущего документа на новый в базе и локальном хранилище.
  - При удачной регистрации вернуть пару jwt-токен и refresh токен.
  - **/info [GET]** — возвращает id пользователя.
  - **/logout [GET]** — выйти из системы. После выхода заблокировать текущие токены пользователя. При следующем входе пользователь должен получить новую пару токенов, отличную от тех, которые были при выходе.
  - Старые токены должны перестать работать после выхода.
  - Вход в API может осуществлять несколько устройств под одним логином. После выхода одного устройства, остальные устройства одного пользователя должны продолжать работать.

### Срок исполнения задания: 3 дня.
### Я сделал за 6 час
